<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Upper Hill Sector â€“ Fixed Boundary</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    #map { height: 600px; width: 100%; }
    .legend { background: white; padding: 10px; border: 1px solid #ccc; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    // Initialize map centered on Nairobi
    const map = L.map('map').setView([-1.295, 36.795], 14);

    // OpenStreetMap tiles
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // === ORIGINAL POLYGON (RED) ===
    const originalCoords = [ /* paste your full original array here */ ];

    L.polygon(originalCoords, {
      color: 'red',
      weight: 2,
      fillOpacity: 0.2,
      dashArray: '5, 10'
    }).addTo(map).bindPopup("Original Upper Hill (excludes Arboretum & Uhuru Hwy)");

    // === CORRECTED POLYGON (GREEN) ===
    const correctedCoords = [
      [-1.2605, 36.8080], [-1.2650, 36.8085], [-1.2750, 36.8090], [-1.2800, 36.8095],
      [-1.2850, 36.8100], [-1.2900, 36.8105], [-1.2950, 36.8110], [-1.3000, 36.8115],
      [-1.3050, 36.8120], [-1.3080, 36.8125], [-1.3100, 36.8130],
      [-1.3096880844, 36.8134305451], [-1.3106299587, 36.8116449766], [-1.3100951056, 36.8102962758],
      [-1.3121298682, 36.8092288257], [-1.3121490118, 36.8087947707], [-1.3131445952, 36.8076293735],
      [-1.3137226799, 36.8071077302], [-1.3146992764, 36.8079318011], [-1.3149340887, 36.8095516003],
      [-1.3160241624, 36.8080991266], [-1.317413311, 36.807359691], [-1.3190663793, 36.8062949635],
      [-1.3195509172, 36.8046748593], [-1.3200078503, 36.8029022287], [-1.3199067216, 36.801514665],
      [-1.3199060455, 36.8004453466], [-1.3204191181, 36.7975019798], [-1.3201965492, 36.79652483],
      [-1.3201053614, 36.7955252241], [-1.318881928, 36.7940985679], [-1.3184753378, 36.7936918378],
      [-1.3182883524, 36.7932271046], [-1.3185183789, 36.7929858278], [-1.3184013091, 36.7926090551],
      [-1.3177929025, 36.7919266379], [-1.3167358529, 36.7900288072], [-1.3155302194, 36.7901172949],
      [-1.3148331937, 36.7895357741], [-1.3145699715, 36.7888853847], [-1.3151885145, 36.7883177766],
      [-1.3149416985, 36.7864495786], [-1.3149973092, 36.7853922476], [-1.3147695532, 36.7845348716],
      [-1.3136927996, 36.7838882156], [-1.3128743771, 36.7842377287], [-1.3116244174, 36.78673324],
      [-1.3104989571, 36.7860599025], [-1.3105736862, 36.7850378599], [-1.3096623257, 36.7846890987],
      [-1.3096088112, 36.7838662335], [-1.3084304213, 36.7840138496], [-1.3082517985, 36.7845220324],
      [-1.307770131, 36.7845776482], [-1.3072862954, 36.784803017], [-1.3068972875, 36.7847571017],
      [-1.3067009667, 36.7849068134], [-1.3066822627, 36.7850768053], [-1.3058127974, 36.7853415954],
      [-1.3066177908, 36.7824786815], [-1.3069606638, 36.776752824], [-1.3072931002, 36.773358806],
      [-1.3058697195, 36.7699667026], [-1.303863816, 36.76776823], [-1.3029256441, 36.7673808674],
      [-1.3025015565, 36.7672783716], [-1.3023632336, 36.7714987325], [-1.3029983958, 36.7715206853],
      [-1.3030469832, 36.7720434188], [-1.3035070683, 36.7729294082], [-1.3040068648, 36.7727633282],
      [-1.3048488409, 36.7744817348], [-1.3036498618, 36.7750421581], [-1.3032864152, 36.7745570102],
      [-1.302139167, 36.7742101398], [-1.3016807736, 36.7787523881], [-1.3023023481, 36.7788306424],
      [-1.3022624827, 36.7796287474], [-1.3030416938, 36.7797212521], [-1.3031845706, 36.7804615608],
      [-1.3036512098, 36.780950222], [-1.3036270167, 36.7814965014], [-1.3031066196, 36.7815401803],
      [-1.3022888921, 36.7807493347], [-1.3015697276, 36.7810364461], [-1.3012828554, 36.7862280426],
      [-1.2999418031, 36.7861150015], [-1.2998777284, 36.7848470803], [-1.2995239706, 36.7846528497],
      [-1.2934976048, 36.7837078695], [-1.2935642529, 36.7820374834], [-1.2936101452, 36.7817940446],
      [-1.2942320801, 36.7817418475], [-1.2942483283, 36.7813407725], [-1.2939211175, 36.7811973684],
      [-1.2939975668, 36.7805010234], [-1.2925057988, 36.7803159786], [-1.2925001224, 36.7801263322],
      [-1.2911011538, 36.7800774308], [-1.2911067276, 36.7795972176], [-1.2901956459, 36.7795048383],
      [-1.2905804608, 36.7784570751], [-1.2905382105, 36.7783387182], [-1.2902592326, 36.778279644],
      [-1.290223904, 36.777808946], [-1.2900539517, 36.7775803665], [-1.289518691, 36.7787366791],
      [-1.289004503, 36.7795502486], [-1.2885435309, 36.7791503602], [-1.287955279, 36.7796660078],
      [-1.2877496661, 36.7796271771], [-1.2881741821, 36.7803181008], [-1.2858332867, 36.7823185282],
      [-1.2853440554, 36.7817611026], [-1.2850216405, 36.7821536135], [-1.2849970596, 36.7825109891],
      [-1.284148075, 36.7835723772], [-1.2846910007, 36.7841040877], [-1.2822992897, 36.7872623071],
      [-1.2828382475, 36.7876287664], [-1.2605, 36.8080]
    ];

    L.polygon(correctedCoords, {
      color: 'green',
      weight: 3,
      fillOpacity: 0.3
    }).addTo(map).bindPopup("Corrected Upper Hill (includes Arboretum, Uhuru Hwy, Raila Odinga Way)");

    // === MARK KEY LANDMARKS ===
    const markers = [
      { pos: [-1.2608, 36.8082], label: "Nairobi Arboretum", color: "blue" },
      { pos: [-1.2950, 36.8095], label: "Uhuru Highway (mid)", color: "blue" },
      { pos: [-1.3080, 36.8120], label: "Raila Odinga Way", color: "blue" },
      { pos: [-1.3020, 36.8140], label: "Britam Tower", color: "purple" },
      { pos: [-1.3030, 36.8080], label: "KNH", color: "purple" }
    ];

    markers.forEach(m => {
      L.circleMarker(m.pos, { radius: 6, color: m.color, fillOpacity: 0.8 })
        .addTo(map)
        .bindPopup(`<b>${m.label}</b>`);
    });

    // === LEGEND ===
    const legend = L.control({ position: 'bottomright' });
    legend.onAdd = () => {
      const div = L.DomUtil.create('div', 'legend');
      div.innerHTML = `
        <i style="background:red; opacity:0.5"></i> Original (too small)<br>
        <i style="background:green; opacity:0.5"></i> Corrected (includes corridor)<br>
        <i style="background:blue"></i> Key landmarks<br>
        <i style="background:purple"></i> Upper Hill core
      `;
      return div;
    };
    legend.addTo(map);

    // Fit bounds to show both polygons
    const allCoords = [...originalCoords, ...correctedCoords];
    const bounds = L.latLngBounds(allCoords.map(c => [c[0], c[1]]));
    map.fitBounds(bounds, { padding: [50, 50] });
  </script>
</body>
</html>
